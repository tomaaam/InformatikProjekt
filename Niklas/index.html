<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helldivers Tastenkombinationen √úben</title>
    <style>
        #actionImage {
            width: 200px;
            height: 200px;
        }
        #arrow-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20vh; /* Moves the container down by half the viewport height */
        }
        .arrow {
            font-family: 'ui-sans-serif', sans-serif; /* Use ui-sans-serif font */
            font-size: 80px;
            margin: 0 20px;
        }
        .action-name {
            font-size: 40px; /* Increase font size */
            font-weight: bold; /* Make bold */
            margin-top: 10px; /* Add top margin */
            text-align: center; /* Center the text */
        }
        .green { color: green; }
        .red { color: red; }
    </style>
</head>
<body>
    <h1>√úbe die Tastenkombinationen f√ºr Helldivers</h1>
    <p>Dr√ºcke die angezeigten Tasten in der richtigen Reihenfolge.</p>
    <div id="arrow-container">
    </div>

    <script>

        const aktionen = [
            { name: "Machine Gun", sequence: ["s", "a", "s", "w", "d"] },
            { name: "Anti-Material Rifle", sequence: ["s", "a", "s", "d", "w", "s"] },
            { name: "Expendable Anti-Tank", sequence: ["s", "s", "a", "s", "w", "d"] },
            { name: "Autocannon", sequence: ["s", "d", "a", "s", "s", "w", "w", "d"] },
            { name: "Railgun", sequence: ["s", "d", "a", "s", "s", "w", "a", "s", "d"] },
            { name: "Orbital Gatling Barrage", sequence: ["d", "s", "d", "a", "s", "w", "w"] },
            { name: "Orbital 120MM HE Barrage", sequence: ["d", "s", "s", "a", "s", "d", "s", "s"] },
            { name: "Orbital 380MM HE Barrage", sequence: ["d", "s", "s", "w", "w", "a", "s", "s", "s"] },
            { name: "Eagle Strafing Run", sequence: ["w", "d", "d"] },
            { name: "Eagle Cluster Bomb", sequence: ["w", "d", "s", "s", "d", "s"] },
            { name: "Eagle Napalm Airstrike", sequence: ["w", "d", "s", "w"] },
            { name: "Jump Pack", sequence: ["s", "w", "w", "s", "w"] },
            { name: "Orbital Precision Strike", sequence: ["d", "d", "w"] },
            { name: "Anti-Personnel Minefield", sequence: ["s", "a", "s", "w", "d"] },
            { name: "Grenade Launcher", sequence: ["s", "a", "s", "w", "a", "s", "s"] },
            { name: "Guard Dog Rover", sequence: ["s", "a", "s", "w", "a", "s", "s"] },
            { name: "Shield Generator Pack", sequence: ["s", "w", "a", "s", "w", "d", "d"] },
            { name: "Machine Gun Sentry", sequence: ["s", "w", "d", "s", "d", "s", "w"] },
            { name: "Gatling Sentry", sequence: ["s", "w", "d", "a", "s"] },
            { name: "Guard Dog", sequence: ["s", "w", "a", "s", "w", "d", "s"] },
        ];
        
        // Randomize the order of actions
        aktionen.sort(() => Math.random() - 0.5);

        let aktuelleAktionIndex = 0;
        let aktuelleTastenIndex = 0;

        const arrowContainer = document.getElementById('arrow-container');

        let mistakeBlinkTimeout;

        function showAction() {
            const aktuelleAktion = aktionen[aktuelleAktionIndex];
            arrowContainer.innerHTML = ''; // Clear previous content
            const arrowContainerDiv = document.createElement('div');
            arrowContainerDiv.id = 'arrow-container';
            arrowContainerDiv.classList.add('arrow-container');

            const actionImage = document.createElement('img');
            actionImage.src = aktuelleAktion.name.toLowerCase().replace(/\s+/g, '-') + '.png';
            actionImage.alt = aktuelleAktion.name;
            actionImage.id = 'actionImage';
            arrowContainerDiv.appendChild(actionImage);

            const actionNameParagraph = document.createElement('p');
            actionNameParagraph.textContent = aktuelleAktion.name;
            actionNameParagraph.classList.add('action-name'); // Add action-name class for styling
            arrowContainerDiv.appendChild(actionNameParagraph);

            arrowContainer.appendChild(arrowContainerDiv);

            setArrowDirection(aktuelleAktion.sequence);
        }

        function setArrowDirection(sequence) {
            const arrowUnicodeMap = {
                'w': 'ü†â', // ‚ñ≤ (Thicker arrow)
                's': 'ü†ã', // ‚ñº (Thicker arrow)
                'a': 'ü†à', // ‚óÑ (Thicker arrow)
                'd': 'ü†ä'  // ‚ñ∫ (Thicker arrow)
            };

            sequence.forEach(taste => {
                const arrowDiv = document.createElement('div');
                arrowDiv.classList.add('arrow');
                arrowDiv.innerHTML = arrowUnicodeMap[taste];
                arrowContainer.appendChild(arrowDiv);
            });
        }

        function checkKeyPress(event) {
            const aktuelleTaste = event.key.toLowerCase();
            const aktuelleAktion = aktionen[aktuelleAktionIndex];

            console.log('Gedr√ºckte Taste:', aktuelleTaste);

            if (aktuelleTaste === aktuelleAktion.sequence[aktuelleTastenIndex]) {
                // Wenn die richtige Taste gedr√ºckt wird
                aktuelleTastenIndex++; // Zum n√§chsten Tastenindex gehen
                console.log('Richtige Taste gedr√ºckt');

                if (aktuelleTastenIndex === aktuelleAktion.sequence.length) {
                    // Wenn alle Tasten erfolgreich gedr√ºckt wurden
                    aktuelleAktionIndex = (aktuelleAktionIndex + 1) % aktionen.length;
                    aktuelleTastenIndex = 0; // Reset Tastenindex f√ºr die n√§chste Aktion
                    showAction();
                }
            } else {
                // Wenn eine falsche Taste gedr√ºckt wird
                aktuelleTastenIndex = 0; // Reset Tastenindex
                makeArrowsRed(aktuelleAktion.sequence);
                mistakeBlinkTimeout = setTimeout(() => { showAction(); }, 1000); // Show the correct action after 1 second
                console.log('Falsche Taste gedr√ºckt');
            }

            updateArrowState();
        }

        function makeArrowsRed(sequence) {
            const arrows = arrowContainer.querySelectorAll('.arrow');
            arrows.forEach((arrow, index) => {
                if (index < aktuelleTastenIndex) {
                    if (sequence[index] !== aktionen[aktuelleAktionIndex].sequence[index]) {
                        arrow.classList.add('red');
                    }
                }
            });
        }

        function updateArrowState() {
            const arrows = arrowContainer.querySelectorAll('.arrow');
            arrows.forEach((arrow, index) => {
                if (index < aktuelleTastenIndex) {
                    arrow.classList.add('green');
                } else {
                    arrow.classList.remove('green');
                    arrow.classList.remove('red');
                }
            });
        }

        document.addEventListener('keydown', checkKeyPress);
        showAction();
    </script>
</body>
</html>
