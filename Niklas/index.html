<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helldivers Tastenkombinationen √úben</title>
    <style>
        /* Original styles */
        #actionImage {
            width: 200px;
            height: 200px;
        }
        #arrow-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20vh;
        }
        .arrow {
            font-family: 'ui-sans-serif', sans-serif;
            font-size: 80px;
            margin: 0 20px;
        }
        .action-name {
            font-size: 40px;
            font-weight: bold;
            margin-top: -150px;
            text-align: center;
        }
        .green { color: green; }
        .red { color: red; }
        
        /* Dark mode */
        body.dark-mode {
            background-color: black;
            color: white;
        }
    </style>
</head>
<body>
    <h1>√úbe die Tastenkombinationen f√ºr Helldivers</h1>
    <p>Dr√ºcke die angezeigten Tasten in der richtigen Reihenfolge.</p>
    <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    <div id="arrow-container">
    </div>

    <script>
        const aktionen = [
            { name: "Machine Gun", sequence: "saswd" },
            { name: "Anti-Material Rifle", sequence: "sasdw" },
            { name: "Expendable Anti-Tank", sequence: "ssaaswd" },
            { name: "Autocannon", sequence: "sdaswwd" },
            { name: "Railgun", sequence: "sdaswasd" },
            { name: "Orbital Gatling Barrage", sequence: "dsdaww" },
            { name: "Orbital 120MM HE Barrage", sequence: "dssasds" },
            { name: "Orbital 380MM HE Barrage", sequence: "dsswwasss" },
            { name: "Eagle Strafing Run", sequence: "wdd" },
            { name: "Eagle Cluster Bomb", sequence: "wdsds" },
            { name: "Eagle Napalm Airstrike", sequence: "wdsww" },
            { name: "Jump Pack", sequence: "swwsw" },
            { name: "Orbital Precision Strike", sequence: "ddw" },
            { name: "Anti-Personnel Minefield", sequence: "saswd" },
            { name: "Grenade Launcher", sequence: "saswaas" },
            { name: "Guard Dog Rover", sequence: "saswaass" },
            { name: "Shield Generator Pack", sequence: "swaswdd" },
            { name: "Machine Gun Sentry", sequence: "swdsdsw" },
            { name: "Gatling Sentry", sequence: "swdas" },
            { name: "Guard Dog", sequence: "swaswds" },
        ];
        
        // Randomize the order of actions
        aktionen.sort(() => Math.random() - 0.5);

        let aktuelleAktionIndex = 0;
        let aktuelleTastenIndex = 0;

        const arrowContainer = document.getElementById('arrow-container');

        let mistakeBlinkTimeout;

        function showAction() {
            const aktuelleAktion = aktionen[aktuelleAktionIndex];
            arrowContainer.innerHTML = ''; // Clear previous content
            const arrowContainerDiv = document.createElement('div');
            arrowContainerDiv.id = 'arrow-container';
            arrowContainerDiv.classList.add('arrow-container');

            const actionImage = document.createElement('img');
            actionImage.src = aktuelleAktion.name.toLowerCase().replace(/\s+/g, '-') + '.png';
            actionImage.alt = aktuelleAktion.name;
            actionImage.id = 'actionImage';
            arrowContainerDiv.appendChild(actionImage);

            const actionNameParagraph = document.createElement('p');
            actionNameParagraph.textContent = aktuelleAktion.name;
            actionNameParagraph.classList.add('action-name'); // Add action-name class for styling
            arrowContainerDiv.appendChild(actionNameParagraph);

            arrowContainer.appendChild(arrowContainerDiv);

            setArrowDirection(aktuelleAktion.sequence);
        }

        function setArrowDirection(sequence) {
            const arrowUnicodeMap = {
                'w': 'ü†â', // ‚ñ≤ (Thicker arrow)
                's': 'ü†ã', // ‚ñº (Thicker arrow)
                'a': 'ü†à', // ‚óÑ (Thicker arrow)
                'd': 'ü†ä'  // ‚ñ∫ (Thicker arrow)
            };

            sequence.split('').forEach(taste => {
                const arrowDiv = document.createElement('div');
                arrowDiv.classList.add('arrow');
                arrowDiv.innerHTML = arrowUnicodeMap[taste];
                arrowContainer.appendChild(arrowDiv);
            });
        }

        function checkKeyPress(event) {
            const aktuelleTaste = event.key.toLowerCase();
            const aktuelleAktion = aktionen[aktuelleAktionIndex];

            console.log('Gedr√ºckte Taste:', aktuelleTaste);

            if (aktuelleTaste === aktuelleAktion.sequence[aktuelleTastenIndex]) {
                // Wenn die richtige Taste gedr√ºckt wird
                aktuelleTastenIndex++; // Zum n√§chsten Tastenindex gehen
                console.log('Richtige Taste gedr√ºckt');

                if (aktuelleTastenIndex === aktuelleAktion.sequence.length) {
                    // Wenn alle Tasten erfolgreich gedr√ºckt wurden
                    aktuelleAktionIndex = (aktuelleAktionIndex + 1) % aktionen.length;
                    aktuelleTastenIndex = 0; // Reset Tastenindex f√ºr die n√§chste Aktion
                    showAction();
                }
            } else {
                // Wenn eine falsche Taste gedr√ºckt wird
                aktuelleTastenIndex = 0; // Reset Tastenindex
                makeArrowsRed(aktuelleAktion.sequence);
                mistakeBlinkTimeout = setTimeout(() => { showAction(); }, 1000); // Show the correct action after 1 second
                console.log('Falsche Taste gedr√ºckt');
            }

            updateArrowState();
        }

        function makeArrowsRed(sequence) {
            const arrows = arrowContainer.querySelectorAll('.arrow');
            arrows.forEach((arrow, index) => {
                if (index < aktuelleTastenIndex) {
                    if (sequence[index] !== aktionen[aktuelleAktionIndex].sequence[index]) {
                        arrow.classList.add('red');
                    }
                }
            });
        }

        function updateArrowState() {
            const arrows = arrowContainer.querySelectorAll('.arrow');
            arrows.forEach((arrow, index) => {
                if (index < aktuelleTastenIndex) {
                    arrow.classList.add('green');
                } else {
                    arrow.classList.remove('green');
                    arrow.classList.remove('red');
                }
            });
        }

        document.addEventListener('keydown', checkKeyPress);
        showAction();

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }
    </script>
</body>
</html>
